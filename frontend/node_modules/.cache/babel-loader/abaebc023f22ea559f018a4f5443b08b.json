{"ast":null,"code":"import _asyncToGenerator from\"C:/Projects/MotelPuro/motel-puro/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Projects/MotelPuro/motel-puro/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Projects\\\\MotelPuro\\\\motel-puro\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useState,useEffect}from'react';import\"./CSS/App.css\";import LoginForm from\"./JS/LoginForm\";import Lodging from\"./JS/Lodging\";import History from\"./JS/History\";import{getAuthedUser}from\"./services/users\";import{BrowserRouter as Router,Routes,Route,Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loggedIn=_useState2[0],setLoggedIn=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),authedUser=_useState4[0],setAuthedUser=_useState4[1];var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getAuthedUser();case 2:user=_context.sent;setAuthedUser(user);case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleLogin(){return _ref.apply(this,arguments);};}();useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var user;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getAuthedUser();case 2:user=_context2.sent;user?setAuthedUser(user):setAuthedUser(null);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();},[]);useEffect(function(){if(authedUser){setLoggedIn(true);}},[authedUser]);return/*#__PURE__*/_jsxs(\"div\",{id:\"log\",children:[!loggedIn&&/*#__PURE__*/_jsx(LoginForm,{handleLogin:handleLogin}),loggedIn&&/*#__PURE__*/_jsx(\"div\",{id:\"wrapper\",children:/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsxs(\"div\",{id:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Le Motel de Puro\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Majoitus\"}),/*#__PURE__*/_jsx(Link,{to:\"/historia\",children:\"Historia\"})]}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Lodging,{})}),/*#__PURE__*/_jsx(Route,{path:\"/historia\",element:/*#__PURE__*/_jsx(History,{})})]}),/*#__PURE__*/_jsx(\"div\",{id:\"footer\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Heta Puro 2022\"})})]})})]});};export default App;","map":{"version":3,"names":["useState","useEffect","LoginForm","Lodging","History","getAuthedUser","BrowserRouter","Router","Routes","Route","Link","App","loggedIn","setLoggedIn","authedUser","setAuthedUser","handleLogin","user","fetchData"],"sources":["C:/Projects/MotelPuro/motel-puro/frontend/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react'\r\nimport \"./CSS/App.css\"\r\nimport LoginForm from \"./JS/LoginForm\"\r\nimport Lodging from \"./JS/Lodging\"\r\nimport History from \"./JS/History\"\r\nimport { getAuthedUser } from \"./services/users\"\r\nimport {\r\n  BrowserRouter as Router,\r\n  Routes, Route, Link\r\n} from \"react-router-dom\"\r\n\r\nconst App = () => {\r\n  const [loggedIn, setLoggedIn ] = useState(false)\r\n  const [authedUser, setAuthedUser ] = useState(null)\r\n\r\n  const handleLogin = async () => {\r\n      const user = await getAuthedUser()\r\n      setAuthedUser(user)\r\n  }\r\n\r\n  useEffect(() => {\r\n\r\n    const fetchData = async () => {\r\n        const user = await getAuthedUser()\r\n        user ? setAuthedUser(user) : setAuthedUser(null)\r\n    }\r\n    fetchData()\r\n\r\n    \r\n  }, [])\r\n\r\n  useEffect(() => {\r\n      if(authedUser){\r\n          setLoggedIn(true)\r\n      }\r\n  }, [authedUser])\r\n\r\n  return (\r\n      <div id='log'>\r\n          {!loggedIn && (\r\n              <LoginForm handleLogin = {handleLogin}/>\r\n          )}\r\n          {loggedIn && (\r\n                <div id='wrapper'>\r\n                  <Router>\r\n                    <div id='header'>\r\n                      <h1>Le Motel de Puro</h1>\r\n                      <Link to=\"/\">Majoitus</Link>\r\n                      <Link to=\"/historia\">Historia</Link>\r\n                    </div>\r\n                    \r\n                    <Routes>\r\n                      <Route path=\"/\" element={<Lodging />} />\r\n                      <Route path=\"/historia\" element={<History />} />                                     \r\n                    </Routes>\r\n\r\n                    <div id='footer'>\r\n                      <p>Heta Puro 2022</p>\r\n                    </div>\r\n                  </Router>\r\n              </div>\r\n          )}\r\n      </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App"],"mappings":"yYAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAO,eAAP,CACA,MAAOC,CAAAA,SAAP,KAAsB,gBAAtB,CACA,MAAOC,CAAAA,OAAP,KAAoB,cAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,cAApB,CACA,OAASC,aAAT,KAA8B,kBAA9B,CACA,OACEC,aAAa,GAAIC,CAAAA,MADnB,CAEEC,MAFF,CAEUC,KAFV,CAEiBC,IAFjB,KAGO,kBAHP,C,wFAKA,GAAMC,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,EAAM,CAChB,cAAiCX,QAAQ,CAAC,KAAD,CAAzC,wCAAOY,QAAP,eAAiBC,WAAjB,eACA,eAAqCb,QAAQ,CAAC,IAAD,CAA7C,yCAAOc,UAAP,eAAmBC,aAAnB,eAEA,GAAMC,CAAAA,WAAW,0FAAG,kKACGX,CAAAA,aAAa,EADhB,QACVY,IADU,eAEhBF,aAAa,CAACE,IAAD,CAAb,CAFgB,sDAAH,kBAAXD,CAAAA,WAAW,0CAAjB,CAKAf,SAAS,CAAC,UAAM,CAEd,GAAMiB,CAAAA,SAAS,2FAAG,wKACKb,CAAAA,aAAa,EADlB,QACRY,IADQ,gBAEdA,IAAI,CAAGF,aAAa,CAACE,IAAD,CAAhB,CAAyBF,aAAa,CAAC,IAAD,CAA1C,CAFc,wDAAH,kBAATG,CAAAA,SAAS,2CAAf,CAIAA,SAAS,GAGV,CATQ,CASN,EATM,CAAT,CAWAjB,SAAS,CAAC,UAAM,CACZ,GAAGa,UAAH,CAAc,CACVD,WAAW,CAAC,IAAD,CAAX,CACH,CACJ,CAJQ,CAIN,CAACC,UAAD,CAJM,CAAT,CAMA,mBACI,aAAK,EAAE,CAAC,KAAR,WACK,CAACF,QAAD,eACG,KAAC,SAAD,EAAW,WAAW,CAAII,WAA1B,EAFR,CAIKJ,QAAQ,eACH,YAAK,EAAE,CAAC,SAAR,uBACE,MAAC,MAAD,yBACE,aAAK,EAAE,CAAC,QAAR,wBACE,wCADF,cAEE,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,sBAFF,cAGE,KAAC,IAAD,EAAM,EAAE,CAAC,WAAT,sBAHF,GADF,cAOE,MAAC,MAAD,yBACE,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,OAAO,cAAE,KAAC,OAAD,IAAzB,EADF,cAEE,KAAC,KAAD,EAAO,IAAI,CAAC,WAAZ,CAAwB,OAAO,cAAE,KAAC,OAAD,IAAjC,EAFF,GAPF,cAYE,YAAK,EAAE,CAAC,QAAR,uBACE,qCADF,EAZF,GADF,EALV,GADJ,CA4BD,CAtDD,CAwDA,cAAeD,CAAAA,GAAf"},"metadata":{},"sourceType":"module"}