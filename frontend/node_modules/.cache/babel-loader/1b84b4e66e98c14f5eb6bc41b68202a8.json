{"ast":null,"code":"import _asyncToGenerator from\"/home/toukopuro/Motel_Puro/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/toukopuro/Motel_Puro/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/toukopuro/Motel_Puro/frontend/node_modules/@babel/runtime/regenerator/index.js\";import{useState,useEffect}from'react';import lodgingService from'./services/lodging';import axios from'axios';import'./Lodging.css';import LoginForm from\"./LoginForm\";import{getAuthedUser}from\"./services/users\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),lodgings=_useState2[0],setLodgings=_useState2[1];var _useState3=useState(new Date()),_useState4=_slicedToArray(_useState3,2),departure=_useState4[0],setDeparture=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loggedIn=_useState6[0],setLoggedIn=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),authedUser=_useState8[0],setAuthedUser=_useState8[1];var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getAuthedUser();case 2:user=_context.sent;setAuthedUser(user);case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleLogin(){return _ref.apply(this,arguments);};}();var changeLodging=function changeLodging(event){event.preventDefault();};var handleDepartureChange=function handleDepartureChange(event){setDeparture(new Date(event.target.value));};useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var user;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getAuthedUser();case 2:user=_context2.sent;user?setAuthedUser(user):setAuthedUser(null);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();},[]);useEffect(function(){if(authedUser){setLoggedIn(true);}},[authedUser]);// lodgingService\n//   .update(id, changedLodging)\n//   .then(response => {\n//     setLodgings(lodgings.map(lodging => lodging.id !== id ? lodging : response.data))\n//   })\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[!loggedIn&&/*#__PURE__*/_jsx(LoginForm,{handleLogin:handleLogin}),loggedIn&&/*#__PURE__*/_jsxs(\"div\",{id:\"wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Le Motel de Puro\"})}),/*#__PURE__*/_jsx(\"div\",{id:\"middle\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"formBG\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"LOPETA MAJOITTAUTUMINEN\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:changeLodging,children:[/*#__PURE__*/_jsx(\"p\",{children:\"Saapumisp\\xE4iv\\xE4:\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"b\",{children:\"30.05.2022\"})}),/*#__PURE__*/_jsx(\"p\",{children:\"Henkil\\xF6iden m\\xE4\\xE4r\\xE4:\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"b\",{children:\"3\"})}),/*#__PURE__*/_jsx(\"label\",{children:\"L\\xE4ht\\xF6p\\xE4iv\\xE4:\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"date\",value:departure.toISOString().slice(0,10),type:\"date\",onChange:handleDepartureChange}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"submit\",type:\"submit\",children:\"KIRJAA\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{id:\"footer\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Heta Puro 2022\"})})]})]});};export default App;","map":{"version":3,"names":["useState","useEffect","lodgingService","axios","LoginForm","getAuthedUser","App","lodgings","setLodgings","Date","departure","setDeparture","loggedIn","setLoggedIn","authedUser","setAuthedUser","handleLogin","user","changeLodging","event","preventDefault","handleDepartureChange","target","value","fetchData","toISOString","slice"],"sources":["/home/toukopuro/Motel_Puro/frontend/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport lodgingService from './services/lodging'\nimport axios from 'axios'\nimport './Lodging.css'\nimport LoginForm from \"./LoginForm\"\nimport { getAuthedUser } from \"./services/users\"\n\nconst App = () => {\n  const [lodgings, setLodgings] = useState([])\n  const [departure, setDeparture] = useState(new Date())\n  const [loggedIn, setLoggedIn ] = useState(false)\n  const [authedUser, setAuthedUser ] = useState(null)\n\n  const handleLogin = async () => {\n      const user = await getAuthedUser()\n      setAuthedUser(user)\n  }\n  const changeLodging = (event) => {\n    event.preventDefault()\n  }\n\n  const handleDepartureChange = (event) => {\n    setDeparture(new Date(event.target.value))\n  }\n\n  useEffect(() => {\n\n    const fetchData = async () => {\n        const user = await getAuthedUser()\n        user ? setAuthedUser(user) : setAuthedUser(null)\n    }\n    fetchData()\n\n    \n  }, [])\n\n  useEffect(() => {\n      if(authedUser){\n          setLoggedIn(true)\n      }\n  }, [authedUser])\n\n  // lodgingService\n  //   .update(id, changedLodging)\n  //   .then(response => {\n  //     setLodgings(lodgings.map(lodging => lodging.id !== id ? lodging : response.data))\n  //   })\n\n  return (\n      <div>\n          {!loggedIn && (\n              <LoginForm handleLogin = {handleLogin}/>\n          )}\n          {loggedIn && (\n                  <div id='wrapper'>\n                  <div id='header'>\n                    <h1>Le Motel de Puro</h1>\n                  </div>\n                  <div id='middle'>\n                    <div className='formBG'>\n                      <h2>LOPETA MAJOITTAUTUMINEN</h2>\n                      <form onSubmit={changeLodging}>\n                        <p>Saapumispäivä:</p>\n                        <p><b>30.05.2022</b></p>\n                        <p>Henkilöiden määrä:</p>\n                        <p><b>3</b></p>\n            \n                        <label>Lähtöpäivä:</label> <br/>\n                        <input className='date' value={departure.toISOString().slice(0, 10)} type='date' onChange={handleDepartureChange}/> <br/>\n            \n                        <button className='submit' type='submit'>KIRJAA</button>\n                      </form>\n                    </div>\n                  </div>\n                  <div id='footer'>\n                    <p>Heta Puro 2022</p>\n                  </div>\n                </div>\n          )}\n      </div>\n  )\n\n}\n\nexport default App"],"mappings":"8WAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,CAAAA,cAAP,KAA2B,oBAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,eAAP,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,OAASC,aAAT,KAA8B,kBAA9B,C,wFAEA,GAAMC,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,EAAM,CAChB,cAAgCN,QAAQ,CAAC,EAAD,CAAxC,wCAAOO,QAAP,eAAiBC,WAAjB,eACA,eAAkCR,QAAQ,CAAC,GAAIS,CAAAA,IAAJ,EAAD,CAA1C,yCAAOC,SAAP,eAAkBC,YAAlB,eACA,eAAiCX,QAAQ,CAAC,KAAD,CAAzC,yCAAOY,QAAP,eAAiBC,WAAjB,eACA,eAAqCb,QAAQ,CAAC,IAAD,CAA7C,yCAAOc,UAAP,eAAmBC,aAAnB,eAEA,GAAMC,CAAAA,WAAW,0FAAG,kKACGX,CAAAA,aAAa,EADhB,QACVY,IADU,eAEhBF,aAAa,CAACE,IAAD,CAAb,CAFgB,sDAAH,kBAAXD,CAAAA,WAAW,0CAAjB,CAIA,GAAME,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,KAAD,CAAW,CAC/BA,KAAK,CAACC,cAAN,GACD,CAFD,CAIA,GAAMC,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACF,KAAD,CAAW,CACvCR,YAAY,CAAC,GAAIF,CAAAA,IAAJ,CAASU,KAAK,CAACG,MAAN,CAAaC,KAAtB,CAAD,CAAZ,CACD,CAFD,CAIAtB,SAAS,CAAC,UAAM,CAEd,GAAMuB,CAAAA,SAAS,2FAAG,wKACKnB,CAAAA,aAAa,EADlB,QACRY,IADQ,gBAEdA,IAAI,CAAGF,aAAa,CAACE,IAAD,CAAhB,CAAyBF,aAAa,CAAC,IAAD,CAA1C,CAFc,wDAAH,kBAATS,CAAAA,SAAS,2CAAf,CAIAA,SAAS,GAGV,CATQ,CASN,EATM,CAAT,CAWAvB,SAAS,CAAC,UAAM,CACZ,GAAGa,UAAH,CAAc,CACVD,WAAW,CAAC,IAAD,CAAX,CACH,CACJ,CAJQ,CAIN,CAACC,UAAD,CAJM,CAAT,CAMA;AACA;AACA;AACA;AACA;AAEA,mBACI,uBACK,CAACF,QAAD,eACG,KAAC,SAAD,EAAW,WAAW,CAAII,WAA1B,EAFR,CAIKJ,QAAQ,eACD,aAAK,EAAE,CAAC,SAAR,wBACA,YAAK,EAAE,CAAC,QAAR,uBACE,wCADF,EADA,cAIA,YAAK,EAAE,CAAC,QAAR,uBACE,aAAK,SAAS,CAAC,QAAf,wBACE,+CADF,cAEE,cAAM,QAAQ,CAAEM,aAAhB,wBACE,2CADF,cAEE,gCAAG,iCAAH,EAFF,cAGE,qDAHF,cAIE,gCAAG,wBAAH,EAJF,cAME,kDANF,kBAM6B,aAN7B,cAOE,cAAO,SAAS,CAAC,MAAjB,CAAwB,KAAK,CAAER,SAAS,CAACe,WAAV,GAAwBC,KAAxB,CAA8B,CAA9B,CAAiC,EAAjC,CAA/B,CAAqE,IAAI,CAAC,MAA1E,CAAiF,QAAQ,CAAEL,qBAA3F,EAPF,kBAOsH,aAPtH,cASE,eAAQ,SAAS,CAAC,QAAlB,CAA2B,IAAI,CAAC,QAAhC,oBATF,GAFF,GADF,EAJA,cAoBA,YAAK,EAAE,CAAC,QAAR,uBACE,qCADF,EApBA,GALZ,GADJ,CAkCD,CA3ED,CA6EA,cAAef,CAAAA,GAAf"},"metadata":{},"sourceType":"module"}