{"ast":null,"code":"import _asyncToGenerator from\"C:/Projects/MotelPuro/motel-puro/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Projects/MotelPuro/motel-puro/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Projects\\\\MotelPuro\\\\motel-puro\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useState,useEffect}from'react';import\"./CSS/App.css\";import lodgingService from\"./services/lodging\";import LoginForm from\"./JS/LoginForm\";import Lodging from\"./JS/Lodging\";import History from\"./JS/History\";import End from\"./JS/End\";import Change from\"./JS/Change\";import{getAuthedUser}from\"./services/users\";import{BrowserRouter as Router,Routes,Route,Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loggedIn=_useState2[0],setLoggedIn=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),authedUser=_useState4[0],setAuthedUser=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),current=_useState6[0],setCurrent=_useState6[1];var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getAuthedUser();case 2:user=_context.sent;setAuthedUser(user);case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleLogin(){return _ref.apply(this,arguments);};}();useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var user;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getAuthedUser();case 2:user=_context2.sent;user?setAuthedUser(user):setAuthedUser(null);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();},[]);useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var current_lodging;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return lodgingService.get_current();case 2:current_lodging=_context3.sent;setCurrent(current_lodging);case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchData(){return _ref3.apply(this,arguments);};}();if(authedUser){setLoggedIn(true);fetchData();}},[authedUser]);return/*#__PURE__*/_jsxs(\"div\",{id:\"log\",children:[!loggedIn&&/*#__PURE__*/_jsx(LoginForm,{handleLogin:handleLogin}),loggedIn&&/*#__PURE__*/_jsx(\"div\",{id:\"wrapper\",children:/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsxs(\"div\",{id:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Le Motel de Puro\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Majoitus\"}),/*#__PURE__*/_jsx(Link,{to:\"/historia\",children:\"Historia\"})]}),/*#__PURE__*/_jsxs(Routes,{children:[current&&/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(End,{propLodging:current,setCurrent:setCurrent})}),!current&&/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Lodging,{})}),/*#__PURE__*/_jsx(Route,{path:\"/historia\",element:/*#__PURE__*/_jsx(History,{})}),/*#__PURE__*/_jsx(Route,{path:\"/muokkaa\",element:/*#__PURE__*/_jsx(Change,{propLodging:current})})]}),/*#__PURE__*/_jsx(\"div\",{id:\"footer\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Heta Puro 2022\"})})]})})]});};export default App;","map":{"version":3,"names":["useState","useEffect","lodgingService","LoginForm","Lodging","History","End","Change","getAuthedUser","BrowserRouter","Router","Routes","Route","Link","App","loggedIn","setLoggedIn","authedUser","setAuthedUser","current","setCurrent","handleLogin","user","fetchData","get_current","current_lodging"],"sources":["C:/Projects/MotelPuro/motel-puro/frontend/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react'\r\nimport \"./CSS/App.css\"\r\nimport lodgingService from \"./services/lodging\"\r\nimport LoginForm from \"./JS/LoginForm\"\r\nimport Lodging from \"./JS/Lodging\"\r\nimport History from \"./JS/History\"\r\nimport End from \"./JS/End\"\r\nimport Change from \"./JS/Change\"\r\nimport { getAuthedUser } from \"./services/users\"\r\nimport {\r\n  BrowserRouter as Router,\r\n  Routes, Route, Link\r\n} from \"react-router-dom\"\r\n\r\nconst App = () => {\r\n  const [loggedIn, setLoggedIn ] = useState(false)\r\n  const [authedUser, setAuthedUser ] = useState(null)\r\n  const [current, setCurrent] = useState(null)\r\n\r\n  const handleLogin = async () => {\r\n      const user = await getAuthedUser()\r\n      setAuthedUser(user)\r\n  }\r\n\r\n  useEffect(() => {\r\n\r\n    const fetchData = async () => {\r\n        const user = await getAuthedUser()\r\n        user ? setAuthedUser(user) : setAuthedUser(null)\r\n    }\r\n    fetchData()\r\n\r\n    \r\n  }, [])\r\n\r\n  useEffect(() => {\r\n      const fetchData = async () => {\r\n        const current_lodging = await lodgingService.get_current()\r\n        setCurrent(current_lodging)\r\n      }\r\n      if(authedUser){\r\n          setLoggedIn(true)\r\n          fetchData()\r\n      }\r\n  }, [authedUser])\r\n\r\n  return (\r\n      <div id='log'>\r\n          {!loggedIn && (\r\n              <LoginForm handleLogin = {handleLogin}/>\r\n          )}\r\n          {loggedIn && (\r\n                <div id='wrapper'>\r\n                  <Router>\r\n                    <div id='header'>\r\n                      <h1>Le Motel de Puro</h1>\r\n                      <Link to=\"/\">Majoitus</Link>\r\n                      <Link to=\"/historia\">Historia</Link>\r\n                    </div>\r\n                    \r\n                    <Routes>\r\n                    {current && (\r\n                        <Route path=\"/\" element={<End propLodging={current}  setCurrent={setCurrent}/>} />\r\n                      )}\r\n                    {!current && (\r\n                      <Route path=\"/\" element={<Lodging />} />\r\n                    )}\r\n                      <Route path=\"/historia\" element={<History />} />\r\n                      <Route path=\"/muokkaa\" element={<Change propLodging={current}/>} />                                     \r\n                    </Routes>\r\n\r\n                    <div id='footer'>\r\n                      <p>Heta Puro 2022</p>\r\n                    </div>\r\n                  </Router>\r\n              </div>\r\n          )}\r\n      </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App"],"mappings":"yYAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAO,eAAP,CACA,MAAOC,CAAAA,cAAP,KAA2B,oBAA3B,CACA,MAAOC,CAAAA,SAAP,KAAsB,gBAAtB,CACA,MAAOC,CAAAA,OAAP,KAAoB,cAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,cAApB,CACA,MAAOC,CAAAA,GAAP,KAAgB,UAAhB,CACA,MAAOC,CAAAA,MAAP,KAAmB,aAAnB,CACA,OAASC,aAAT,KAA8B,kBAA9B,CACA,OACEC,aAAa,GAAIC,CAAAA,MADnB,CAEEC,MAFF,CAEUC,KAFV,CAEiBC,IAFjB,KAGO,kBAHP,C,wFAKA,GAAMC,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,EAAM,CAChB,cAAiCd,QAAQ,CAAC,KAAD,CAAzC,wCAAOe,QAAP,eAAiBC,WAAjB,eACA,eAAqChB,QAAQ,CAAC,IAAD,CAA7C,yCAAOiB,UAAP,eAAmBC,aAAnB,eACA,eAA8BlB,QAAQ,CAAC,IAAD,CAAtC,yCAAOmB,OAAP,eAAgBC,UAAhB,eAEA,GAAMC,CAAAA,WAAW,0FAAG,kKACGb,CAAAA,aAAa,EADhB,QACVc,IADU,eAEhBJ,aAAa,CAACI,IAAD,CAAb,CAFgB,sDAAH,kBAAXD,CAAAA,WAAW,0CAAjB,CAKApB,SAAS,CAAC,UAAM,CAEd,GAAMsB,CAAAA,SAAS,2FAAG,wKACKf,CAAAA,aAAa,EADlB,QACRc,IADQ,gBAEdA,IAAI,CAAGJ,aAAa,CAACI,IAAD,CAAhB,CAAyBJ,aAAa,CAAC,IAAD,CAA1C,CAFc,wDAAH,kBAATK,CAAAA,SAAS,2CAAf,CAIAA,SAAS,GAGV,CATQ,CASN,EATM,CAAT,CAWAtB,SAAS,CAAC,UAAM,CACZ,GAAMsB,CAAAA,SAAS,2FAAG,mLACcrB,CAAAA,cAAc,CAACsB,WAAf,EADd,QACVC,eADU,gBAEhBL,UAAU,CAACK,eAAD,CAAV,CAFgB,wDAAH,kBAATF,CAAAA,SAAS,2CAAf,CAIA,GAAGN,UAAH,CAAc,CACVD,WAAW,CAAC,IAAD,CAAX,CACAO,SAAS,GACZ,CACJ,CATQ,CASN,CAACN,UAAD,CATM,CAAT,CAWA,mBACI,aAAK,EAAE,CAAC,KAAR,WACK,CAACF,QAAD,eACG,KAAC,SAAD,EAAW,WAAW,CAAIM,WAA1B,EAFR,CAIKN,QAAQ,eACH,YAAK,EAAE,CAAC,SAAR,uBACE,MAAC,MAAD,yBACE,aAAK,EAAE,CAAC,QAAR,wBACE,wCADF,cAEE,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,sBAFF,cAGE,KAAC,IAAD,EAAM,EAAE,CAAC,WAAT,sBAHF,GADF,cAOE,MAAC,MAAD,YACCI,OAAO,eACJ,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,OAAO,cAAE,KAAC,GAAD,EAAK,WAAW,CAAEA,OAAlB,CAA4B,UAAU,CAAEC,UAAxC,EAAzB,EAFJ,CAIC,CAACD,OAAD,eACC,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,OAAO,cAAE,KAAC,OAAD,IAAzB,EALF,cAOE,KAAC,KAAD,EAAO,IAAI,CAAC,WAAZ,CAAwB,OAAO,cAAE,KAAC,OAAD,IAAjC,EAPF,cAQE,KAAC,KAAD,EAAO,IAAI,CAAC,UAAZ,CAAuB,OAAO,cAAE,KAAC,MAAD,EAAQ,WAAW,CAAEA,OAArB,EAAhC,EARF,GAPF,cAkBE,YAAK,EAAE,CAAC,QAAR,uBACE,qCADF,EAlBF,GADF,EALV,GADJ,CAkCD,CAlED,CAoEA,cAAeL,CAAAA,GAAf"},"metadata":{},"sourceType":"module"}